// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Profile {
  profile_id       Int           @id @default(autoincrement())
  email            String        @unique
  name             String
  ethnicity        String?
  income           String?
  preferred_season String?
  friends          Int[]
  profile_trip     ProfileTrip[]
}

// do composite primary key for profile trip
model ProfileTrip {
  profile               Profile @relation(fields: [profile_id], references: [profile_id])
  profile_id            Int
  trip                  Trip    @relation(fields: [trip_id], references: [trip_id])
  trip_id               Int
  is_ready_to_optimize  Boolean
  trip_preferences_json Json

  @@unique([profile_id, trip_id])
}

model Trip {
  trip_id                Int           @id @default(autoincrement())
  createdAt              DateTime      @default(now())
  name                   String
  start_date_dttm        DateTime
  end_date_dttm          DateTime
  dates_approximate      Boolean
  start_location_idx     String
  end_location_idx       String
  locations_json         Json
  itineraries_json_array Json[]
  profile_trip           ProfileTrip[]
}
